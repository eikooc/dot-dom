<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:title" content="Gotchas"><meta property="og:description" content="Gotchas Since .dom is optimized for size and not for performance nor developer friendliness, you should be aware that there are few rough edges.
Component roots cannot change The component state is preserved on it&rsquo;s root DOM element. On it&rsquo;s own turn, this element is indexed by the component&rsquo;s key.
This means, that once mounted, the component won&rsquo;t be able to change the type of the root element, since it will be persisted in the cache."><meta property="og:type" content="article"><meta property="og:url" content="https://wavesoft.github.io/dot-dom/docs/topics/gotchas/"><title>Gotchas | .dom Documentation</title><link rel=icon href=/dot-dom/favicon.png type=image/x-icon><link rel=stylesheet href=/dot-dom/book.min.1b994bd28c6ce2255f069b6bf6837b4d396307637fc48d61dcb2a6caac26e031.css integrity="sha256-G5lL0oxs4iVfBptr9oN7TTljB2N/xI1h3LKmyqwm4DE="><script defer src=/dot-dom/search.min.e877b02a60eae47f92b9877498d1a2fb2b0e09d717560265bf30d90d9007bf98.js integrity="sha256-6HewKmDq5H&#43;SuYd0mNGi&#43;ysOCdcXVgJlvzDZDZAHv5g="></script><script src=https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.6/ace.js integrity="sha256-CVkji/u32aj2TeC+D13f7scFSIfphw2pmu4LaKWMSY8=" crossorigin=anonymous></script><script src=/dot-dom/js/dotdom.min.js></script><script src=/dot-dom/js/dotdom-example.js></script><link rel=stylesheet href=/dot-dom/css/styles.css></head><body><input type=checkbox class=hidden id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://wavesoft.github.io/dot-dom/><span>.dom Documentation</span></a></h2><div class=book-search><input type=text placeholder=Search id=book-search-input maxlength=64><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><span>Installation</span><ul><li><a href=/dot-dom/docs/install/getting-started/>Getting Started</a></li><li><a href=/dot-dom/docs/install/add-to-website/>Adding .dom in your website</a></li><li><a href=/dot-dom/docs/install/create-web-app/>Creating a WebApp</a></li><li><a href=/dot-dom/docs/install/serving-compressed/>Serving GZ version of .dom</a></li></ul></li><li><span>Topics</span><ul><li><a href=/dot-dom/docs/topics/quick-start/>Quick Start</a></li><li><a href=/dot-dom/docs/topics/declarative/>Declarative DOM</a></li><li><a href=/dot-dom/docs/topics/components/>Components</a></li><li><a href=/dot-dom/docs/topics/stateful-components/>Stateful Components</a></li><li><a href=/dot-dom/docs/topics/component-lifecycle/>Component Lifecycle</a></li><li><a href=/dot-dom/docs/topics/raw/>Raw Components</a></li><li><a href=/dot-dom/docs/topics/reconciliation/>Reconciliation</a></li><li><a href=/dot-dom/docs/topics/gotchas/ class=active>Gotchas</a></li></ul></li><li><span>API Reference</span><ul><li><a href=/dot-dom/docs/api/globals/>Globals</a></li><li><a href=/dot-dom/docs/api/component-functions/>Component Functions</a></li><li><a href=/dot-dom/docs/api/vdom-element/>VDom Element</a></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class="flex align-center justify-between book-header"><label for=menu-control><img src=/dot-dom/svg/menu.svg alt=Menu></label>
<strong>Gotchas</strong></header><article class=markdown><h1 id=gotchas>Gotchas</h1><p>Since <code>.dom</code> is optimized for <em>size</em> and not for performance nor developer friendliness, you should be aware that there are few rough edges.</p><hr><h2 id=component-roots-cannot-change>Component roots cannot change</h2><p>The component state is preserved on it&rsquo;s root DOM element. On it&rsquo;s own turn, this element is indexed by the component&rsquo;s <a href=/dot-dom/docs/api/component-functions/#k-key>key</a>.</p><p>This means, that once mounted, the component won&rsquo;t be able to change the type of the root element, since it will be persisted in the cache.</p><p>For example:</p><div class=dot-dom-example><div class=editor><div>const { div, a } = H;
function Component(props, state, setState, meta) {
const root = state.toggle ? &#34;em&#34; : &#34;strong&#34;;
return H(root,
a({
href: &#34;javascript:;&#34;,
onclick() {
setState({
toggle: !state.toggle
})
}
},
state.toggle
? &#34;Switch to &lt;strong&gt;&#34;
: &#34;Switch to &lt;em&gt;&#34;
)
)
}
R(
div(
&#34;The component root will always be &lt;strong&gt; (use inspect to verify):&#34;,
div(
H(Component)
)
),
document.body
);</div></div><div class=preview><div></div></div></div><hr><div class=topic-nav><div><div>Previous Topic</div><div><a href=https://wavesoft.github.io/dot-dom/docs/topics/reconciliation/ class=book-btn>&larr; Reconciliation</a></div></div></div></article></div><aside class="book-toc level-6 fixed"><nav id=TableOfContents><ul><li><a href=#gotchas>Gotchas</a><ul><li><a href=#component-roots-cannot-change>Component roots cannot change</a></li></ul></li></ul></nav></aside></main></body></html>